#!/usr/bin/env node
import J from"fs";import*as f from"node:fs";import*as q from"node:path";import*as F from"node:child_process";import v from"node:process";async function G(){let y=v.argv[1];if(!y)return{packageManager:"unknown",isGlobal:!1};let j=v.cwd();try{let I=f.realpathSync(y).replace(/\\/g,"/"),D=j.replace(/\\/g,"/");if(I.includes("/.npm/_npx")||I.includes("/npm/_npx"))return{packageManager:"npx",isGlobal:!1,updateMessage:"Running via npx, update not applicable."};if(v.platform==="darwin")try{return F.execSync('brew list -1 | grep -q "^cli$"',{stdio:"ignore"}),{packageManager:"homebrew",isGlobal:!0,updateMessage:'Installed via Homebrew. Please update with "brew upgrade".'}}catch{}if(I.includes("/dlx"))return{packageManager:"pnpx",isGlobal:!1,updateMessage:"Running via pnpx, update not applicable."};if(I.includes("/pnpm/global"))return{packageManager:"pnpm",isGlobal:!0,updateCommand:"pnpm add -g @snelusha/cli@latest",updateMessage:"Please run pnpm add -g @snelusha/cli@latest to update"};if(I.includes("/.yarn/global"))return{packageManager:"yarn",isGlobal:!0,updateCommand:"yarn global add @snelusha/cli@latest",updateMessage:"Please run yarn global add @snelusha/cli@latest to update"};if(I.includes("/bunx"))return{packageManager:"bunx",isGlobal:!1,updateMessage:"Running via bunx, update not applicable."};if(I.includes("/.bun/install/global"))return{packageManager:"bun",isGlobal:!0,updateCommand:"bun add -g @snelusha/cli@latest",updateMessage:"Please run bun add -g @snelusha/cli@latest to update"};if(D&&I.startsWith(`${D}/node_modules`)){let S="npm";if(f.existsSync(q.join(j,"yarn.lock")))S="yarn";else if(f.existsSync(q.join(j,"pnpm-lock.yaml")))S="pnpm";else if(f.existsSync(q.join(j,"bun.lockb"))||f.existsSync(q.join(j,"bun.lock")))S="bun";return{packageManager:S,isGlobal:!1,updateMessage:"Locally installed. Please update via your project's package.json."}}let E="npm install -g @snelusha/cli@latest";return{packageManager:"npm",isGlobal:!0,updateCommand:E,updateMessage:`Please run ${E} to update`}}catch{return{packageManager:"unknown",isGlobal:!1}}}var H=process.argv[1],K=J.realpathSync(H).replace(/\\/g,"/");console.log(H);console.log(K);var L=await G();console.log(L);

// Made by a human on earth!
